# Debezium CDC with Multiple Sources - Environment Configuration Template
# Copy this file to .env and modify as needed

# ------------------------------------------------------------
# General Configuration
# ------------------------------------------------------------
# Source Type - Options: mysql, postgresql, mongodb, oracle, cassandra
SOURCE_TYPE=mysql

# Feature flags to enable/disable source databases
ENABLE_MYSQL=true
ENABLE_POSTGRESQL=false
ENABLE_MONGODB_SOURCE=false
ENABLE_ORACLE=false
ENABLE_CASSANDRA=false

# Versions
MYSQL_VERSION=8.0
POSTGRESQL_VERSION=16
MONGODB_SOURCE_VERSION=6.0
MONGODB_SINK_VERSION=6.0
ORACLE_VERSION=19.3.0
CASSANDRA_VERSION=4.1
RABBITMQ_VERSION=3.12
DEBEZIUM_VERSION=3.0.0.Final

# Network Configuration
MYSQL_PORT=3306
POSTGRESQL_PORT=5432
MONGODB_SOURCE_PORT=27017
ORACLE_PORT=1521
CASSANDRA_PORT=9042
RABBITMQ_PORT=5672
RABBITMQ_MANAGEMENT_PORT=15672
MONGODB1_PORT=27017
MONGODB2_PORT=27018

# ------------------------------------------------------------
# MySQL Configuration
# ------------------------------------------------------------
MYSQL_HOST=mysql
MYSQL_ROOT_PASSWORD=debezium
MYSQL_USER=debezium
MYSQL_PASSWORD=dbz
MYSQL_DATABASE=inventory

# MySQL Server Configuration
MYSQL_SERVER_ID=1
MYSQL_BINLOG_FORMAT=ROW
MYSQL_BINLOG_ROW_IMAGE=FULL
MYSQL_EXPIRE_LOGS_DAYS=10

# ------------------------------------------------------------
# PostgreSQL Configuration
# ------------------------------------------------------------
POSTGRESQL_HOST=postgresql
POSTGRESQL_USER=postgres
POSTGRESQL_PASSWORD=postgres
POSTGRESQL_DATABASE=inventory

# ------------------------------------------------------------
# MongoDB Source Configuration
# ------------------------------------------------------------
MONGODB_SOURCE_HOST=mongodb-source
MONGODB_SOURCE_USER=admin
MONGODB_SOURCE_PASSWORD=admin
MONGODB_SOURCE_DATABASE=inventory
MONGODB_SOURCE_REPLICA_SET=rs0

# ------------------------------------------------------------
# Oracle Configuration
# ------------------------------------------------------------
ORACLE_HOST=oracle
ORACLE_PASSWORD=oracle
ORACLE_SID=ORCLCDB
ORACLE_PDB=ORCLPDB1
ORACLE_USER=C##DBZUSER

# ------------------------------------------------------------
# Cassandra Configuration
# ------------------------------------------------------------
CASSANDRA_HOST=cassandra
CASSANDRA_USER=cassandra
CASSANDRA_PASSWORD=cassandra
CASSANDRA_KEYSPACE=inventory

# ------------------------------------------------------------
# RabbitMQ Configuration
# ------------------------------------------------------------
RABBITMQ_HOST=rabbitmq
RABBITMQ_USER=guest
RABBITMQ_PASSWORD=guest
RABBITMQ_VHOST=/
RABBITMQ_EXCHANGE=cdc-events
RABBITMQ_EXCHANGE_TYPE=topic
RABBITMQ_QUEUE_NAME=cdc.events
RABBITMQ_ROUTING_KEY=cdc
RABBITMQ_URI=amqp://${RABBITMQ_USER}:${RABBITMQ_PASSWORD}@${RABBITMQ_HOST}:${RABBITMQ_PORT}/${RABBITMQ_VHOST}

# ------------------------------------------------------------
# MongoDB Sink Configuration
# ------------------------------------------------------------
MONGODB_SINK_USER=admin
MONGODB_SINK_PASSWORD=admin
MONGODB_SINK_DATABASE=cdc_data
MONGODB_SINK_COLLECTION_PREFIX=${SOURCE_TYPE}

# MongoDB 1
MONGODB1_HOST=mongodb1
MONGODB1_URI=mongodb://${MONGODB_SINK_USER}:${MONGODB_SINK_PASSWORD}@${MONGODB1_HOST}:27017/

# MongoDB 2
MONGODB2_HOST=mongodb2
MONGODB2_URI=mongodb://${MONGODB_SINK_USER}:${MONGODB_SINK_PASSWORD}@${MONGODB2_HOST}:27017/

# ------------------------------------------------------------
# Debezium Configuration - Common
# ------------------------------------------------------------
DEBEZIUM_SINK_TYPE=rabbitmq
DEBEZIUM_OFFSET_STORAGE_FILE=/debezium/data/offsets.dat
DEBEZIUM_OFFSET_FLUSH_INTERVAL_MS=0
DEBEZIUM_SCHEMA_HISTORY_FILE=/debezium/data/schema_history.dat
DEBEZIUM_SCHEMA_HISTORY_CLASS=io.debezium.storage.file.history.FileSchemaHistory
DEBEZIUM_FORMAT_VALUE=json
DEBEZIUM_FORMAT_KEY=json
DEBEZIUM_SERVER_ID=184054

# MySQL Source-specific settings
MYSQL_SOURCE_DB_INCLUDE_LIST=${MYSQL_DATABASE}
MYSQL_SOURCE_TABLE_INCLUDE_LIST=${MYSQL_DATABASE}.customers,${MYSQL_DATABASE}.orders
MYSQL_SCHEMA_HISTORY_FILE=/debezium/data/mysql_schema_history.dat
MYSQL_TOPIC_PREFIX=mysql

# PostgreSQL Source-specific settings 
POSTGRESQL_SOURCE_TABLE_INCLUDE_LIST=public.customers,public.orders
POSTGRESQL_SCHEMA_HISTORY_FILE=/debezium/data/postgresql_schema_history.dat
POSTGRESQL_SCHEMA=public
POSTGRESQL_TOPIC_PREFIX=postgresql

# MongoDB Source-specific settings
MONGODB_SOURCE_COLLECTION_INCLUDE_LIST=${MONGODB_SOURCE_DATABASE}.customers,${MONGODB_SOURCE_DATABASE}.orders
MONGODB_SOURCE_TOPIC_PREFIX=mongodb

# Oracle Source-specific settings
ORACLE_SOURCE_DB_INCLUDE_LIST=${ORACLE_USER}
ORACLE_SOURCE_TABLE_INCLUDE_LIST=${ORACLE_USER}.CUSTOMERS,${ORACLE_USER}.ORDERS
ORACLE_SCHEMA_HISTORY_FILE=/debezium/data/oracle_schema_history.dat
ORACLE_TOPIC_PREFIX=oracle

# Cassandra Source-specific settings
CASSANDRA_SOURCE_KEYSPACE_INCLUDE_LIST=${CASSANDRA_KEYSPACE}
CASSANDRA_SOURCE_TABLE_INCLUDE_LIST=${CASSANDRA_KEYSPACE}.customers,${CASSANDRA_KEYSPACE}.orders
CASSANDRA_TOPIC_PREFIX=cassandra

# RabbitMQ sink settings
DEBEZIUM_SINK_RABBITMQ_CONNECTION_HOST=${RABBITMQ_HOST}
DEBEZIUM_SINK_RABBITMQ_CONNECTION_PORT=${RABBITMQ_PORT}
DEBEZIUM_SINK_RABBITMQ_CONNECTION_USERNAME=${RABBITMQ_USER}
DEBEZIUM_SINK_RABBITMQ_CONNECTION_PASSWORD=${RABBITMQ_PASSWORD}
DEBEZIUM_SINK_RABBITMQ_EXCHANGE=${RABBITMQ_EXCHANGE}
DEBEZIUM_SINK_RABBITMQ_ROUTINGKEY=${RABBITMQ_ROUTING_KEY}
